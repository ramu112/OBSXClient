<div>
	<ul class="breadcrumb">
		<li><a href="#/organization">{{'link.admin.organisation' |
				translate}}</a> <span class="divider">/</span></li>
		<li class="active">{{'label.managediscounts' |
			translate}}&nbsp;&nbsp;{{employee.lastname}}</li>
	</ul>

</div>
<div data-ng-controller="DiscountsController">
	<tabset style="margin-bottom: 0px;"> <tab
		heading="{{'tab.discount' | translate}}" select="getDicounts()"
		data-ng-show="$parent.PermissionService.showMenu('READ_DISCOUNT')">
	<div class="pull-right">
		<a data-ng-show="PermissionService.showMenu('CREATE_DISCOUNT')"
			href="#/creatediscounts" class="btn btn-primary"><i
			class="icon-plus icon-white"></i> {{ 'link.create.new.discount' |
			translate }}</a>
	</div>
	<div>
		<input data-ng-model="filterText" type="text" class="span marginbottom0px"
			placeholder="Enter text to search"> <br>
		<table class="table">
			<thead>
				<tr class="graybg">
					<th>{{ 'table.heading.discountCode' | translate }}</th>
					<th>{{ 'table.heading.discountDescription' | translate }}</th>
					<th>{{ 'table.heading.discountType' | translate }}</th>
					<th>{{ 'table.heading.discountRate' | translate }}</th>
					<th>{{ 'table.heading.startDate' | translate }}</th>
					<th>{{ 'table.heading.status' | translate }}</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr class="pointer-main" data-ng-repeat="discount in discounts | filter:filterText">
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountCode}}</td>
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountDescription}}</td>
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountType}}</td>
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountRate}}</td>
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountStartDate|DateFormat}}</td>
					<td class="pointer"
						data-ng-click="routeToDiscounts(discount.id)">{{discount.discountStatus}}</td>
					<td>
						<a data-ng-show="PermissionService.showMenu('UPDATE_DISCOUNT')" 
							href="#/editdiscounts/{{discount.id}}" data-popover="{{'label.editdiscounts' | translate}}" data-popover-trigger="mouseenter">
                    		<i class="icon-edit icon-white"></i>
                    	</a>&nbsp;
                    	<a data-ng-show="PermissionService.showMenu('DELETE_DISCOUNT')"
                    	 	data-ng-click="deleteDiscount(discount.id)" data-popover="{{'label.heading.deletediscount' | translate}}" data-popover-trigger="mouseenter">
                    		<i class="icon-remove icon-white"></i>
                    	</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	</tab> <tab heading="{{'tab.PromotionCode' | translate}}"
		select="getPromotionCodes()" active="PromotionCodeTab"
		data-ng-show="$parent.PermissionService.showMenu('READ_PROMOTIONCODE')">
	<div class="pull-right">
		<a data-ng-show="PermissionService.showMenu('CREATE_PROMOTIONCODE')"
			href="#/createpromotion" class="btn btn-primary"><i
			class="icon-plus icon-white"></i>{{ 'link.create.new.PromotionCode' |
			translate }}</a>
	</div>
	<div>
		<input data-ng-model="filterText" type="text" class="span marginbottom0px"
			placeholder="Enter text to search"> <br>
		<table class="table">
			<thead>
				<tr class="graybg">
					<th>{{ 'table.heading.PromotionCode' | translate }}</th>
					<th>{{ 'table.heading.promotionDescription' | translate }}</th>
					<th>{{ 'table.heading.DurationType' | translate }}</th>
					<th>{{ 'table.heading.Duration' | translate }}</th>
					<th>{{ 'table.heading.discountType' | translate }}</th>
					<th>{{ 'table.heading.discountRate' | translate }}</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr class="pointer-main" data-ng-repeat="promotiondadata in promotiondatas | filter:filterText">
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.promotionCode}}</td>
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.promotionDescription}}</td>
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.durationType}}</td>
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.duration}}</td>
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.discountType}}</td>
					<td class="pointer"
						data-ng-click="routeToPromotion(promotiondadata.id)">{{promotiondadata.discountRate}}</td>
					<td>
						<a data-ng-show="PermissionService.showMenu('UPDATE_PROMOTIONCODE')" 
							href="#/editpromotioncode/{{promotiondadata.id}}" data-popover="{{'label.editpromotioncode' | translate}}" data-popover-trigger="mouseenter">
                    		<i class="icon-edit icon-white"></i>
                    	</a>&nbsp;
                    	<a data-ng-show="PermissionService.showMenu('DELETE_PROMOTIONCODE')"
                    	 	data-ng-click="deletePromotion(promotiondadata.id)" data-popover="{{'dialog.promotion.code.title.message' | translate}}" data-popover-trigger="mouseenter">
                    		<i class="icon-remove icon-white"></i>
                    	</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	</tab> </tabset>
	
	<script type="text/ng-template" id="deletePopupForDiscount.html">
    	<div class="modal-header silver">
        	<h3 class="bolder">{{'label.heading.deletediscount' | translate}}</h3>
        </div>

        <div class="modal-body style="height:60px;">
            <h4>Are you sure?</h4>
        </div>

        <div class="modal-footer">
            <button class="btn btn-warning" ng-click="cancel()">{{'button.cancel' | translate}}</button>
            <button class="btn btn-primary" ng-click="approve()">{{'label.confirm' | translate}}</button>
        </div>
   </script>
   
   <script type="text/ng-template" id="deletepopupForPromotionCodes.html">
   	<div class="modal-header silver">
    	<h3 class="bolder">{{'dialog.promotion.code.title.message' | translate}}</h3>
    </div>

    <div class="modal-body" style="height:60px;">
    	<h4>Are you sure?</h4>
    </div>

   	<div class="modal-footer">
    	<button class="btn btn-warning" ng-click="cancel()">{{'button.cancel' | translate}}</button>
       	<button class="btn btn-primary" ng-click="approve(date.actDate)">{{'label.confirm' | translate}}</button>
    </div>
   </script>
</div>